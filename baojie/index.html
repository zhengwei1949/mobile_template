
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
<meta content="yes" name="apple-mobile-web-app-capable">
<meta content="black" name="apple-mobile-web-app-status-bar-style">
<meta content="telephone=no" name="format-detection">
<meta content="email=no" name="format-detection">
<title>宝洁达人玩一把</title>
<link rel="shortcut icon" type="image/x-icon" href="https://res.wx.qq.com/payactres/zh_CN/htmledition/images/favicon1d7e6c.ico" />
<link onerror="(this)" rel="stylesheet" href="style.css">
<script type="text/javascript">
 function pageResponse(opt){function getElementsByClassName(cl){if(document.getElementsByClassName){return document.getElementsByClassName(cl)}else{var ele=[],els=document.getElementsByTagName("*"),i=els.length;cl=cl.replace(/\-/g,"\\-");var pa=new RegExp("(^|\\s)"+cl+"(\\s|$)");while(--i>=0){if(pa.test(els[i].className)){ele.push(els[i])}}return ele}}function template(mode,obj,num){var s=obj.style;s.width=pw+"px";s.height=ph+"px";s.webkitTransformOrigin="left top 0";s.transformOrigin="left top 0";s.webkitTransform="scale("+num+")";s.transform="scale("+num+")";if(mode=="auto"){document.body.style.height=ph*num+"px"}else if(mode=="contain"||mode=="cover"){s.position="absolute";s.left="50%";s.top="50%";s.marginLeft=pw/-2+"px";s.marginTop=ph/-2+"px";s.webkitTransformOrigin="center center 0";s.transformOrigin="center center 0";document.body.style.msTouchAction="none";document.ontouchmove=function(e){e.preventDefault()}}}var dw=document.documentElement.clientWidth,dh=document.documentElement.clientHeight,ds=dw/dh,pw=opt.width||320,ph=opt.height||504,ps=pw/ph,pd=getElementsByClassName(opt.class),sm=opt.mode||"auto",sn;for(i=0;i<pd.length;i++){sn=(sm=="contain")?(ds>ps?dh/ph:dw/pw):(sm=="cover")?(ds<ps?dh/ph:dw/pw):dw/pw;template(sm,pd[i],sn)}}
</script>
</head>

<body>
	
<div class="popload page" id="popload">
	<div class="popload-main">
	<span class="popload-main-ico"></span>
	<p class="popload-main-txt">疯狂加载中...</p>
	</div>
</div>


	
<article class="index page" id="index">
	<img src="https://res.wx.qq.com/payactres/zh_CN/htmledition/images/mobile/2015/procter_gamble/index_bg26a2f4.png" alt="宝洁达人秀一把" width="275" height="286" class="index-img">
	<a href="javascript:;" class="btn-red index-btn" data-stat="wxzf.action.procter_gamble.play" id="index_btn">玩一把 ></a>
	<img src="https://res.wx.qq.com/payactres/zh_CN/htmledition/images/mobile/2015/procter_gamble/business_logo26a2f4.png" alt="商家图标" width="187" height="41" class="index-business-logo">
	<div class="index-footer flex flex-pack-center flex-align-center">
		<img src="https://res.wx.qq.com/payactres/zh_CN/htmledition/images/mobile/2015/procter_gamble/both26a2f4.png" alt="微信支付 宝洁" width="175" height="24">
	</div>
</article>


	
<article class="game page hide" id="game">
	<header class="game-head">
		<strong class="order" id="game_order">0</strong>
		<em class="time" id="game_time">60</em>
	</header>
	
	<ul class="game-main">
		<li class=""></li>
		<li class=""></li>
		<li class=""></li>
		<li class=""></li>
		<li class=""></li>
		<li class=""></li>
		<li class=""></li>
		<li class=""></li>
		<li class=""></li>
	</ul>
</article>


	 

<div class="guide page hide" id="guide">
	<div class="guide-bg"></div>
</div>
	 



<article class="state page hide" id="state">
	<div class="state-wrap">
		<div class="state-fail"></div>
		<div class="state-suc"></div>
		<div class="state-order">0</div>
		<h2 class="state-title">摇微信抢10万宝洁立减券</h2>
		<div class="state-info">
			<a href="javascript:;" data="22.542965,114.083699"  class="state-info-a" target="_blank"><span class="ico-address"></span>深南天虹</a> 
			<a href="javascript:;" data="22.574496,113.864554" class="state-info-a" target="_blank"><span class="ico-address"></span>宝安中心区天虹购物中心</a>
		</div>
		<h3 class="state-rule">活动规则：</h3>
		<ol class="state-detail">
			<li>参与门店：天虹超市“深南天虹”和“宝安中心区天虹购物中心”</li>
			<li>6月26-28日期间，摇一摇领宝洁10元立减券<br/>（可购买指定的150种单品）</li>
			<li>7月3-6日期间，摇一摇领宝洁10元&50元立减券或沙宣旅行套装</li>
			<li>活动期间两家门店全场使用微信支付，可享受100%随机立减优惠，<br/>最高优惠为全额免单<br/>(活动具体详情以天虹活动门店公告为准）</li>
		</ol>
		<div class="state-btn flex flex-pack-justify">
			<a href="javascript:;" class="btn-red state-btn-again" data-stat="wxzf.action.procter_gamble.again" id="again">再玩一次</a>
			<a href="http://mp.weixin.qq.com/s?__biz=MjM5MjE2NzI4MA==&mid=244570185&idx=1&sn=b1bf2629c844156f566825f71a56f9fa#rd" class="btn-yellow" data-stat="wxzf.action.procter_gamble.get" target="_blank">免费领礼包</a>
		</div>
	</div>
</article>



<div id="container" class="container hide"></div>
<div class="container-close flex flex-pack-center flex-align-center hide">
	<a href="javascript:;" class="btn-yellow container-close-btn" data-stat="wxzf.action.procter_gamble.know" id="know">我知道了</a>
</div>


</body>
<script type="text/javascript">
window.onload = window.onresize = function(){
    var page = new pageResponse({
        class : 'page',     //模块的类名，使用class来控制页面上的模块(1个或多个)
        mode : 'contain',     // auto || contain || cover 
        width : '320',      //输入页面的宽度，默认宽320px 
        height : '504'      //输入页面的高度，默认高504px
    })
    var mask = new pageResponse({
        class : 'mask',     //模块的类名，使用class来控制页面上的模块(1个或多个)
        mode : 'cover',     // auto || contain || cover 
        width : '320',      //输入页面的宽度，默认宽320px 
        height : '504'      //输入页面的高度，默认高504px
    })

}
</script>
<script onerror="(this)" src="https://res.wx.qq.com/payactres/zh_CN/htmledition/js/logic/mobile/2015/procter_gamble/zepto.min26a2f4.js"></script>
<script onerror="(this)" src="https://res.wx.qq.com/payactres/zh_CN/htmledition/js/logic/mobile/2015/procter_gamble/index26a69e.js"></script>
<script onerror="(this)" language="javascript" src="http://pingjs.qq.com/ping.js"></script>
<script type="text/javascript">
	
	//--------------config start
	var config = {
		statURL  : "/mobile/2015/procter_gamble/index_tmpl",     //活动统计的地址
		appMsgKey: "wxzf.action.procter_gamble.appmessage",  //发送朋友消息统计的KEY
		timelineKey : "wxzf.action.procter_gamble.timeline",  //分享到朋友圈统计的KEY
		//title    : "我是"+txt1+"，你敢挑战么？",    //分享出去的标题
		//desc     : "我用微信扫码刷卡,60秒收银"+val+"单，超过全国“"+txt2+"%收银员”你呢？",	  //分享出去的描述
		link     : "http://action.weixin.qq.com/payact/readtemplate?t=mobile/2015/procter_gamble/index_tmpl",    //分享出去的地址
		// imgUrl   : "http://ol.weixin.qq.com:8080/ui_static_wxzf/mobile/cashier/img/ico_share.jpg"	  //分享出去的图片
	}	
	//--------------config end

	if(typeof(pgvMain) == 'function'){
		pgvMain("", {virtualDomain: "action.weixin.qq.com",virtualURL:config.statURL});
	}

	function clickStat(adtag){
        if(typeof(pgvSendClick) != "undefined"){
            pgvSendClick({
                "hottag"        : adtag,
                "virtualDomain" : "action.weixin.qq.com"
            }); 
        }
    }

    //微信分享模块
	var Wx = function(){

		var _config = {
			appId: "",
			title: config.title,
			desc : config.desc,
			link : config.link,
			imgUrl: config.imgUrl,
			appMsgKey: config.appMsgKey,
			timelineKey: config.timelineKey
		}

		 /**
	     * 绑定微信的分享监听事件     
	     */
	    var _bindWeixinShare = function(){

	        WeixinJSBridge.on('menu:share:appmessage', function (argv) { 	               

	            WeixinJSBridge.invoke('sendAppMessage', _getShareConfig(1), function (resp) { 
	                _handleShareCall(resp.err_msg,"appmessage");              
	            });           
	        });

	        WeixinJSBridge.on('menu:share:timeline', function (argv) { 
	        	WeixinJSBridge.invoke('shareTimeline',_getShareConfig(2), function (resp) {
		            _handleShareCall(resp.err_msg,"timeline");           
		        });
	        });	       
	    }

	    /**
	     * 获取分享的对象 
	     * @return {Object}  分享的常量信息
	     */
	    var _getShareConfig = function(type){



	        return {
	            "appid"  : _config.appId ? _config.appId : '',
	            "img_url": "https://res.wx.qq.com/payactres/zh_CN/htmledition/images/mobile/2015/procter_gamble/ico_share_suc26a2f4.jpg",
	            "link"   : _config.link,
	            "desc"   : share_txt,
	            "title"  : type == 1 ? txt1 : share_txt,
	            "img_width" :"120",
	            "img_height":"120"
	        }        
	    }

	    /**
	     * 处理用户操作的回调事件
	     * @param  {String} msg     用户操作的回调字符串
	     * @param  {String} operate 用户操作类型 朋友圈或者是好友好戏
	     */
	    var _handleShareCall = function(msg,operate){
	        var prefix = (operate == "timeline" ? "share_timeline" : "send_app_msg") + ":";
	        var callback = _config.callback||{};

	        if(msg == prefix + "cancel"){
	            callback.cancel && callback.cancel();
	        }else if(msg == prefix + "fail"){
	            callback.fail && callback.fail();
	        }else if(msg == prefix + "confirm" || msg == prefix + "ok"){
	            callback.ok && callback.ok();

	            clickStat(operate == "timeline" ? _config.timelineKey : _config.appMsgKey);
	        }
	    }

	    return {
	    	init: _bindWeixinShare
	    }
	}();

	if (typeof window.WeixinJSBridge == "undefined"){
        document.addEventListener('WeixinJSBridgeReady', Wx.init, false);
    }else{
        Wx.init();
    }

    //-------------------点击流统计的初始化
    var stat_nodes = document.querySelectorAll("[data-stat]");

    for(var i = 0 ,l = stat_nodes.length; i < l; i++){
    	stat_nodes[i].addEventListener("click",function(e){
    		clickStat(e.target.getAttribute("data-stat"));
    	})
    }

</script>


<script onerror="(this)" charset="utf-8" src="http://map.qq.com/api/js?v=2.exp"></script>
<script>
var citylocation,map,marker = null,
	arr;
var init = function() {
    
    // if(!arr[1]) return
    var center = new qq.maps.LatLng(22.543220,114.083910);
    // var city = document.getElementById("city");
    map = new qq.maps.Map(document.getElementById('container'),{
        center: center,
        zoom: 15
    });
    citylocation = new qq.maps.CityService({
        complete : function(results){
            map.setCenter(results.detail.latLng);
            // city.style.display = 'inline';
            // city.innerHTML = '所在位置: ' + results.detail.name;
			
            if (marker != null) {
                marker.setMap(null);
            }
            marker = new qq.maps.Marker({
                map: map,
                position: results.detail.latLng
            });
        }
    });
    geolocation_latlng();
    map.zoomTo(17);
}

function geolocation_latlng() {
    var latlngStr = arr.split(",",2);
    var lat = parseFloat(latlngStr[0]);
    var lng = parseFloat(latlngStr[1]);
    var latLng = new qq.maps.LatLng(lat, lng);

    map.setCenter(latLng)   
    new qq.maps.Marker({
        map: map,
        position: latLng
    });
}

//启用地图
$("[data]").on("tap",function(e){
  arr = $(e.target).attr("data");
  $("#container").removeClass("hide");
  $(".container-close").removeClass("hide");
  init();
})
$("#know").on("tap",function(e){
  $("#container").addClass("hide");
  $(".container-close").addClass("hide");
})

</script>

</html>
 


